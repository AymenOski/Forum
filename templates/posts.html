{{ define "posts" }}

<section class="posts-container">
    <h2 class="posts-title">All Posts</h2>

    {{if .posts}}
    {{range .posts}}
    <article class="forum-post" data-post-id="{{.ID}}">
        <div class="post-header">
            <span class="post-author">Posted by {{.Author.UserName}}</span>
            <span class="post-id">Post #{{.ID}}</span>
            <span class="post-date">{{.CreatedAt.Format "Jan 02, 2006 15:04"}}</span>
        </div>

        <div class="post-content">{{.Content}}</div>

        <div class="post-footer">
            <div class="post-categories">
                {{range .Categories}}
                <span class="category-badge">{{.Name}}</span>
                {{end}}
            </div>
            <div class="post-stats">
                <!-- Like Button -->
                <form method="POST" action="/likeposts/?id={{.ID}}/1" class="reaction-form">
                    <button type="submit" class="reaction-btn like-btn">
                        <span>ğŸ‘</span>
                        <span class="count">{{.LikeCount}}</span>
                    </button>
                </form>

                <!-- Dislike Button -->
                <form method="POST" action="/likeposts/?id={{.ID}}/0" class="reaction-form">
                    <button type="submit" class="reaction-btn dislike-btn">
                        <span>ğŸ‘</span>
                        <span class="count">{{.DislikeCount}}</span>
                    </button>
                </form>

                <!-- Comments Toggle -->
                <!-- <form method="GET" action="/posts/{{.ID}}#comments" class="reaction-form"> -->
                    <button type="submit" class="reaction-btn comments-btn">
                        <span>ğŸ’¬</span>
                        <span class="count">{{len .Comments}}</span>
                    </button>
                <!-- </form> -->
            </div>
        </div>

        {{if .Comments}}
        <div class="comments-section" id="comments">
            <div class="comments-header">
                Comments ({{len .Comments}})
            </div>
            {{range .Comments}}
            <div class="comment">
                <div class="comment-author">{{.UserName}}</div>
                <div class="comment-content">{{.Content}}</div>
            </div>
            {{end}}
        </div>
        {{end}}
    </article>
    {{end}}
    {{else}}
    <p>No posts available.</p>
    {{end}}
</section>
{{end}}